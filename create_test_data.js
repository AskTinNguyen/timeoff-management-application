const models = require('./lib/model/db'); const crypto = require('crypto'); const config = require('./lib/config'); async function createTestData() { try { const company = await models.Company.create({ name: 'Test Company', country: 'US', start_of_new_year: 1, date_format: 'YYYY-MM-DD', timezone: 'America/New_York', mode: 1, integration_api_enabled: false, carry_over: 0, is_team_view_hidden: false }); const department = await models.Department.create({ name: 'Management', companyId: company.id }); const password = crypto.createHash('md5').update('secret123' + config.get('crypto_secret')).digest('hex'); const user = await models.User.create({ email: 'admin@test.com', password: password, name: 'Test', lastname: 'Admin', activated: true, admin: true, start_date: new Date(), companyId: company.id, DepartmentId: department.id }); department.bossId = user.id; await department.save(); await models.LeaveType.bulkCreate([ { name: 'Holiday', color: '#22AA66', use_allowance: 1, companyId: company.id }, { name: 'Sick Leave', color: '#459FF3', use_allowance: 0, companyId: company.id } ]); console.log('Test data created successfully!'); console.log('Login with:'); console.log('Email: admin@test.com'); console.log('Password: secret123'); process.exit(0); } catch (error) { console.error('Error:', error); process.exit(1); } } createTestData();
